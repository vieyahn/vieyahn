#!/usr/bin/python
# -*- coding: utf-8 -*-

from string import Template
import os
import random
import re


def trans_to_filled_bits(number, width=8):
    """"把数字转换成固定长度
        比如18，转换成8位的：00000018
    """
    number_str = str(number)
    return number_str.zfill(width) 


the_date = "20180108"
deal_item_lines = ["201801030000000000237922201801041560000000000000000000000000000000002153202018010314344003160106A00000108 379 00000000000000000000000001300000122 3790000000893 110000 20180104000000000000000000000000000379 0000000000 0000000000000000000000000000000000000000000 20180103 00000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000 0000000000 0106 00 00000 0000000000000000 00000 00000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000 3790000000893 00000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000基金账号不存在 0000000000000000 20180104",
                   "201801030000000000237922201801041560000000000000000000000000000000002153202018010314344003160106A00000108 379 00000000000000000000000001300000122 3790000000893 110000 20180104000000000000000000000000000379 0000000000 0000000000000000000000000000000000000000000 20180103 00000000000000000000000000000000000000000000000000000000000000000 000000000000000000000000000000000000000000000000000000000000000000000000 0000000000000 0000000000 0106 00 00000 0000000000000000 00000 00000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000 3790000000893 00000000000000000000000000000000000000000000000000000000000000000 00000000000000000000000000000000基金账号不存在 0000000000000000 20180104"]
deal_counts_8_bits = trans_to_filled_bits(len(deal_item_lines))


template_file = open("template2.txt")
template_file_content = template_file.read()

template = Template(template_file_content)
trans_template = template.substitute(date=the_date,
                                     deal_counts_8_bits=deal_counts_8_bits,
                                     deal_item_lines='\n'.join(deal_item_lines))
print trans_template
filled_variables = {}

f = open(the_date + "0002.txt", 'w')
f.write(trans_template)
f.close()
